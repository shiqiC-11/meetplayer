<!--pages/my/my.wxml-->
<view class="page-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view wx:if="{{ userInfo }}" class="user-info flex-start">
      <image class="avatar-large" src="{{ userInfo.avatarUrl }}" mode="aspectFill" />
      <view class="user-detail flex-1 ml-20">
        <text class="nickname">{{ userInfo.nickName }}</text>
        <view class="level-info">
          <text class="level-text">{{ userInfo.level.simple }}</text>
          <text wx:if="{{ userInfo.level.ntrp }}" class="ntrp-text"> (NTRP {{ userInfo.level.ntrp }})</text>
          <text wx:if="{{ userInfo.level.verified }}" class="verified-badge"> âœ…</text>
        </view>
        <view class="stats">
          <text class="stat-item">â­ {{ userInfo.rating || 'æš‚æ— è¯„åˆ†' }}</text>
          <text class="stat-item">ğŸ“Š {{ userInfo.totalGames || 0 }} åœº</text>
          <text class="stat-item">ğŸ’ {{ userInfo.creditScore || 100 }} ä¿¡ç”¨åˆ†</text>
        </view>
      </view>
    </view>

    <view wx:else class="login-prompt" bindtap="goToLogin">
      <image class="avatar-large" src="/assets/images/default-avatar.jpg" />
      <text class="login-text">ç‚¹å‡»ç™»å½•</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <van-cell-group>
      <van-cell
        title="æˆ‘çš„çº¦çƒ"
        icon="orders-o"
        is-link
        url="/pages/my-slots/my-slots"
      />
      <van-cell
        title="æ”¶è—çš„çƒåœº"
        icon="star-o"
        is-link
        url="/pages/favorite-venues/favorite-venues"
      />
      <van-cell
        title="æˆ‘çš„è¯„ä»·"
        icon="comment-o"
        is-link
        url="/pages/my-reviews/my-reviews"
      />
    </van-cell-group>
  </view>

  <view class="menu-section">
    <van-cell-group>
      <van-cell
        title="ç¼–è¾‘èµ„æ–™"
        icon="edit"
        is-link
        url="/pages/edit-profile/edit-profile"
      />
      <van-cell
        title="è®¾ç½®"
        icon="setting-o"
        is-link
        url="/pages/settings/settings"
      />
    </van-cell-group>
  </view>

  <view class="menu-section">
    <van-cell-group>
      <van-cell
        title="ç”¨æˆ·åè®®"
        icon="description"
        is-link
        url="/pages/agreement/agreement?type=user"
      />
      <van-cell
        title="éšç§æ”¿ç­–"
        icon="shield-o"
        is-link
        url="/pages/agreement/agreement?type=privacy"
      />
      <van-cell
        title="å…³äºæˆ‘ä»¬"
        icon="info-o"
        is-link
        url="/pages/about/about"
      />
    </van-cell-group>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view wx:if="{{ userInfo }}" class="logout-section">
    <van-button
      block
      type="default"
      bind:tap="onLogout"
    >
      é€€å‡ºç™»å½•
    </van-button>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version-info">
    <text class="version-text">MeetPlayer v1.0.0</text>
  </view>
</view>
