# 约球小程序 - 产品设计文档

## 1. 产品概述

### 1.1 产品定位
一款帮助网球爱好者快速找到球友、组织约球的微信小程序。解决传统微信群约球信息混乱、匹配效率低的痛点。

### 1.2 目标用户
- 主要用户：有一定网球基础，需要找球友打球的人
- 次要用户：有固定场地和时间，缺少球友的人

### 1.3 核心价值
- **对发起者：** 快速找到匹配的球友，不浪费场地
- **对寻找者：** 发现附近的局，节省订场成本
- **对双方：** 建立可信的球友社交网络

---

## 2. 功能需求

### 2.1 MVP 核心功能

#### 功能 1：用户系统
- 微信快速登录
- 完善个人资料
  - 昵称、头像（微信授权获取）
  - 性别
  - **打球等级（分层体系）：**
    - **简化等级（必选）：** 新手/初级/中级/高级/专业
    - **NTRP 等级（可选）：** 1.0-7.0（间隔 0.5）
    - 系统自动显示简化等级 ↔ NTRP 对应关系
  - 常用位置（可选）
  - 擅长运动（MVP 仅网球）

#### 功能 2：发布 Slot（约球局）
**发布流程：**
1. 选择运动类型：网球
2. 选择时间：日期 + 时间段（如：2026-01-05 14:00-16:00）
3. 选择球场：
   - **搜索已有球场（推荐）：**
     - 按距离显示附近球场
     - 显示球场评分、场地数、价格
     - 智能匹配避免重复
   - **或在地图上选择位置**
   - **找不到？创建新球场：**
     - 填写球场详细信息
     - 上传照片（可选）
     - 提交审核（获得 +10 信用分）
4. 设置招募要求：
   - **等级要求（双模式）：**
     - 简化模式：选择接受的等级（可多选）："初级"、"中级"
     - 精确模式：设置 NTRP 范围：2.5-4.0
     - 系统自动显示对应关系
   - 性别要求（不限/仅男/仅女）
   - 还缺几人（1-3 人）
5. 补充说明（选填）：如"带水和毛巾"

**Slot 信息展示：**
- 发起人头像、昵称、等级、评分
- 时间、地点、距离
- **费用信息（如果收费）：**
  - 每人应付金额
  - 付款进度（X/Y 人已付款）
  - 费用说明
- 招募要求
- 当前报名人数/总需求人数
- 状态：招募中/等待付款/已满员/已取消/已完成

#### 功能 3：浏览和搜索 Slot
**展示模式：**
- **地图模式（默认）：** 
  - 显示球场标记（按球场聚合）
  - 标记上显示该球场的 Slots 数量
  - 点击球场查看该场所有时段
- **列表模式：** 按时间排序展示所有 Slots

**筛选器：**
- 时间：今天/明天/本周/自定义日期
- 距离：1km/3km/5km/10km
- **等级（智能筛选）：**
  - 简化模式：新手/初级/中级/高级/专业
  - 精确模式：NTRP 范围滑块（2.0-5.0）
  - 可切换模式，系统自动转换
- 性别：不限/仅男/仅女

**排序方式：**
- 距离优先
- 时间优先

#### 功能 4：申请加入 Slot
**申请流程：**
1. 点击"申请加入"
2. **查看费用信息（如果收费）：**
   - 每人应付：¥50
   - 费用说明
   - 支付方式和时间要求
3. 填写申请留言（选填）："我是中级水平，希望一起打"
4. 提交申请
5. 等待发起人审核

**申请状态：**
- 待审核
- **已通过 → 待付款（如果收费）：**
  - 显示付款引导（MVP：微信转账二维码）
  - 或跳转支付（Phase 2：微信支付）
- 已付款 → 已确认（显示球场详细地址）
- 已拒绝

#### 功能 5：审核申请（发起人）
**审核界面：**
- 查看申请人资料：头像、昵称、等级、历史评分、打球次数
- 申请留言
- 操作：通过 / 拒绝

**自动规则：**
- 申请人数达到需求人数时，自动关闭招募
- 发起人可提前关闭招募

#### 功能 6：消息通知
**通知场景：**
- 有人申请你的 slot → 发起人收到通知
- 申请被通过 → 申请人收到通知
- 申请被拒绝 → 申请人收到通知
- Slot 被取消 → 所有参与者收到通知
- 临近活动时间（提前 2 小时）→ 所有参与者收到提醒

**通知方式：**
- 微信服务通知（模板消息）
- 小程序内消息中心

#### 功能 7：个人中心
**我的 Slots：**
- 我发布的（进行中/已完成/已取消）
- 我参加的（进行中/已完成）

**个人资料：**
- 编辑资料
- 查看我的评价
- 我的统计：总场次、评分、信用分

**其他功能：**
- 设置（消息通知开关）
- 关于我们
- 用户协议和隐私政策

#### 功能 8：评价系统
**Slot 评价（完成后）：**
- 活动完成后，双方可以互评
- 星级（1-5 星）
- 预设标签：守时、球技好、友好、爽约、迟到、态度差
- 文字评价（选填）

**球场评价（Phase 2）：**
- 只有在该球场打过球的用户可评价
- 整体评分 + 分项评分：
  - 场地质量
  - 设施完善度
  - 环境卫生
  - 性价比
- 预设标签：场地好、有灯光、交通方便、价格贵等
- 文字评价 + 照片上传
- 其他用户可点"有用"

#### 功能 9：球场系统（Phase 2 核心功能）

**球场详情页：**
- 球场基本信息：
  - 名称、地址、距离
  - 场地数量和类型（硬地/红土/草地）
  - 室内/室外、是否有灯光
  - 设施：更衣室、淋浴、停车、器材租赁
  - 价格参考（日场/夜场）
  - 联系方式和开放时间
- 综合评分和评价统计
- 照片墙（用户上传）
- 该球场的所有约球时段：
  - 按时间筛选：今天/明天/本周/全部
  - 列表显示所有 Slots
- 操作按钮：
  - 收藏球场
  - 在这里发布约球
  - 写评价
  - 上传照片

**球场创建和审核：**
- 用户贡献新球场（UGC）
- 填写详细信息和上传照片
- 提交后进入审核队列
- 审核通过后显示在地图上
- 贡献者获得 +10 信用分

**球场数据质量：**
- 智能去重（地理位置 + 名称匹配）
- 重复球场合并
- 错误信息举报和修正

---

### 2.2 Phase 2 功能（MVP 后迭代）

#### 即时聊天
- 小程序内一对一聊天
- 确认细节、讨论战术

#### AA 付款
- 场地费分摊
- **Host 灵活选择：**
  - 免费局（不收费）
  - 完全 AA（所有人均摊）
  - 部分承担（Host 承担一部分）
- **MVP：** 引导式微信转账（二维码/群收款）
- **Phase 2：** 微信支付集成
  - 自动分账给 Host
  - 自动退款机制
  - 预收款模式（先收钱再订场）

#### 球场数据库
- 预设常用球场（用户贡献）
- 球场评分和评价
- 球场设施信息

#### 等级认证
- 上传等级证书
- 视频认证（录制击球视频，AI/人工评估）
- 教练认证（教练推荐）
- 官方认证标识（✅蓝勾 / 🏆金牌 / 👨‍🏫教练认证）
- **等级校准系统：** 每完成 10 场球，建议重新评估等级

#### 举报和黑名单
- 举报恶意用户
- 拉黑功能
- 信用体系（取消次数过多降低信用分）

#### 支持更多运动
- 羽毛球、篮球、足球、乒乓球

---

## 3. 技术方案

### 3.1 技术栈
- **前端：** 微信小程序原生开发
- **UI 组件库：** Vant Weapp
- **后端：** 微信云开发（云函数 + 云数据库 + 云存储）
- **地图：** 微信地图 API（腾讯地图）
- **支付：** 微信支付（Phase 2）

### 3.2 数据库设计

#### users（用户表）
```javascript
{
  _openid: "xxx",
  nickName: "小王",
  avatarUrl: "https://...",
  gender: 1, // 0未知 1男 2女
  
  // 分层等级体系
  level: {
    simple: "中级", // 简化等级（必选）
    ntrp: 3.5, // NTRP 等级（可选，1.0-7.0）
    verified: false, // 是否已认证
    verifiedType: null, // video/certificate/coach
    verifiedAt: null,
    lastUpdated: Date,
    calibrationCount: 5 // 完成场次（用于提示校准）
  },
  
  sports: ["网球"],
  rating: 4.8,
  totalGames: 25,
  creditScore: 100,
  location: {
    lat: 39.9,
    lng: 116.3
  },
  
  // 收藏的球场
  favoriteVenues: ["venue_xxx", "venue_yyy"],
  
  createdAt: Date
}
```

#### venues（球场表 - 新增）
```javascript
{
  _id: "venue_xxx",
  
  // 基础信息
  name: "朝阳公园网球场",
  alias: ["Chaoyang Park Tennis", "朝阳网球"],
  
  // 地理位置
  location: db.Geo.Point(116.4, 39.9),
  address: {
    province: "北京市",
    city: "北京市",
    district: "朝阳区",
    street: "农展南路1号",
    detail: "朝阳公园内东侧"
  },
  
  // 场地信息
  courts: {
    total: 8,
    types: {
      hardCourt: 6,
      clayCourt: 2,
      grassCourt: 0
    },
    indoor: false,
    lighting: true
  },
  
  // 设施
  facilities: {
    locker: true,
    shower: true,
    parking: true,
    equipment: true
  },
  
  // 价格
  pricing: {
    dayRate: { min: 100, max: 150 },
    nightRate: { min: 150, max: 180 },
    currency: "CNY"
  },
  
  // 联系方式
  contact: {
    phone: "010-12345678",
    hours: "6:00-22:00"
  },
  
  // 评价统计
  rating: {
    overall: 4.5,
    count: 230,
    breakdown: {
      courtQuality: 4.6,
      facilities: 4.4,
      cleanliness: 4.5,
      value: 4.3
    }
  },
  
  // 统计
  stats: {
    slotsCount: 156,
    viewCount: 1234,
    favoriteCount: 89
  },
  
  // 照片
  photos: [
    {
      url: "https://...",
      uploaderId: "openid_xxx",
      uploadedAt: Date,
      isPrimary: true
    }
  ],
  
  // 审核状态
  status: "verified", // pending/verified/rejected
  verifiedBy: "admin_xxx",
  verifiedAt: Date,
  
  // 创建信息
  createdBy: "openid_xxx",
  createdAt: Date,
  updatedAt: Date
}
```

#### slots（约球局表）
```javascript
{
  _id: "slot_xxx",
  _openid: "发起人openid",
  sport: "网球",
  datetime: "2026-01-05T14:00:00Z",
  duration: 120,
  
  // 关联球场（关键变化）
  venueId: "venue_xxx", // 球场 ID（必填）
  venue: { // 冗余信息（快速显示）
    name: "朝阳公园网球场",
    location: db.Geo.Point(116.4, 39.9),
    rating: 4.5,
    address: "北京市朝阳区..."
  },
  
  requirement: {
    simpleLevel: ["初级", "中级"],
    ntrpMin: 2.5,
    ntrpMax: 4.0,
    gender: 0,
    needCount: 1
  },
  currentCount: 0,
  participants: ["openid1", "openid2"],
  status: "open",
  note: "带水和毛巾",
  
  // 支付信息
  paymentSettingId: "payment_xxx", // 关联支付设置
  
  createdAt: Date
}
```

#### venue_reviews（球场评价表 - 新增）
```javascript
{
  _id: "review_xxx",
  venueId: "venue_xxx",
  userId: "openid_xxx",
  
  // 评分
  rating: {
    overall: 5,
    courtQuality: 5,
    facilities: 4,
    cleanliness: 5,
    value: 4
  },
  
  // 标签
  tags: ["场地好", "有灯光", "交通方便"],
  
  // 内容
  content: "场地维护得很好...",
  photos: ["https://...", "https://..."],
  
  // 互动
  helpful: {
    count: 12,
    users: ["openid_1", "openid_2"]
  },
  
  // 状态
  status: "approved",
  createdAt: Date,
  updatedAt: Date
}
```

#### applications（申请表）
```javascript
{
  _id: "app_xxx",
  slotId: "slot_xxx",
  applicantId: "openid",
  status: "pending", // pending/approved/rejected
  message: "我是中级水平",
  createdAt: Date,
  respondedAt: Date
}
```

#### reviews（评价表）
```javascript
{
  slotId: "slot_xxx",
  fromUserId: "openid1",
  toUserId: "openid2",
  rating: 5,
  tags: ["守时", "球技好"],
  comment: "准时到场，球技不错",
  createdAt: Date
}
```

### 3.3 关键 API

```javascript
// 云函数列表

// 1. 发布 slot
createSlot(slotData)

// 2. 获取附近的 slots
getNearbySlots({ lat, lng, filters })

// 3. 申请加入
applySlot({ slotId, message })

// 4. 审核申请
respondApplication({ applicationId, action }) // approve/reject

// 5. 取消 slot
cancelSlot({ slotId })

// 6. 提交评价
submitReview({ slotId, toUserId, rating, tags, comment })

// 7. 获取我的 slots
getMySlots({ type }) // created/joined

// 8. 获取用户资料
getUserProfile({ userId })
```

### 3.4 性能优化
- 地图聚合显示（超过 50 个 pin 点时）
- 列表虚拟滚动
- 图片懒加载
- 云函数缓存热门查询

---

## 4. UI/UX 设计

### 4.1 页面结构
```
├── 首页（附近）
│   ├── 地图模式
│   └── 列表模式
├── 发布 Slot
├── Slot 详情
├── 消息中心
└── 个人中心
    ├── 我的 Slots
    ├── 我的资料
    └── 设置
```

### 4.2 配色方案
- **主色：** #52C41A（活力绿，象征运动和网球）
- **辅色：** #F5F5F5（浅灰背景）
- **强调色：** #FF4D4F（红色警示）
- **文字：** #262626（深灰）、#8C8C8C（浅灰）

### 4.3 关键页面原型
（建议使用 Figma 设计详细原型）

**首页（地图模式）：**
- 顶部：筛选按钮 + 切换列表/地图
- 中间：地图 + pin 点
- 底部：悬浮的"发布约球"按钮
- 底部 Tab Bar：附近 | 消息 | 我的

**Slot 详情卡片：**
```
┌─────────────────────────────┐
│ [头像] 小王 | 中级 | ⭐4.8   │
│ 网球 | 2026-01-05 14:00-16:00│
│ 📍 朝阳公园网球场（距离 1.2km）│
│ 等级要求：初级、中级             │
│ 性别：不限 | 还缺 1 人          │
│ 💬 "带水和毛巾"               │
│ [申请加入] 按钮                │
└─────────────────────────────┘
```

---

## 5. 开发计划

### 5.1 时间排期（2 周）

**Week 1：核心功能**
- Day 1-2：项目初始化、UI 组件库集成、云开发配置
- Day 3-4：用户登录、个人资料页
- Day 5-7：发布 Slot 功能（含地图选点）

**Week 2：完整闭环**
- Day 8-9：浏览和筛选 Slots（地图 + 列表）
- Day 10-11：申请和审核流程
- Day 12：消息通知、个人中心
- Day 13-14：测试、优化、准备提交审核

### 5.2 里程碑
- **M1（Day 7）：** 能发布 Slot
- **M2（Day 11）：** 完整闭环（发布 → 申请 → 审核）
- **M3（Day 14）：** 提交微信审核

---

## 6. 风险和挑战

### 6.1 技术风险
| 风险 | 影响 | 解决方案 |
|------|------|----------|
| 地理位置查询性能 | 中 | 限制查询范围 5km，超过提示切换区域 |
| 并发申请同一 Slot | 中 | 云函数事务锁 |
| 微信审核不通过 | 高 | 准备完整的隐私协议、用户协议 |

### 6.2 产品风险
| 风险 | 影响 | 解决方案 |
|------|------|----------|
| 冷启动（没有用户） | 高 | 邀请种子用户、线下推广 |
| 恶意用户骚扰 | 中 | 举报拉黑系统（Phase 2） |
| 信任问题 | 中 | 评价系统、信用体系 |

---

## 7. 成功指标

### 7.1 MVP 验证指标
- **注册用户数：** 100+
- **发布 Slot 数：** 50+
- **成功约球次数：** 20+
- **用户留存率（7 天）：** >30%
- **平均响应时间：** <2 小时

### 7.2 用户反馈收集
- 小程序内问卷调查
- 邀请 10 个种子用户深度访谈
- 收集 bug 反馈和功能建议

---

## 8. 附录

### 8.1 等级体系详细说明

#### 8.1.1 分层等级设计

**设计理念：** 兼顾易用性（面向大众）和专业性（面向资深球友）

**三层架构：**

1️⃣ **简化等级层（必选）** - 降低认知门槛
2️⃣ **标准等级层（可选）** - 精确匹配
3️⃣ **认证等级层（可选）** - 建立信任

#### 8.1.2 简化等级 ↔ NTRP 映射表

| 简化等级 | NTRP 范围 | 技术特征 | 典型场景 |
|---------|----------|---------|---------|
| 🌱 新手 | 1.0-2.0 | 刚开始学，还不太会打 | 正在学习握拍和基础击球 |
| 🎾 初级 | 2.5-3.0 | 能连续对打，但不稳定 | 能慢速对拉 5-10 拍 |
| ⭐ 中级 | 3.5-4.0 | 能打比赛，有基本战术 | 能参加业余比赛 |
| 🏆 高级 | 4.5-5.0 | 参加过正式比赛，技术全面 | 俱乐部主力水平 |
| 👑 专业 | 5.5-7.0 | 职业或准职业水平 | 专业运动员 |

#### 8.1.3 NTRP 详细标准

**NTRP 2.0**
- 有一定击球能力，但缺乏稳定性
- 正在学习正确的挥拍动作
- 对场地位置和比分了解有限

**NTRP 2.5**
- 能慢速对打，但方向控制较差
- 能发球但缺乏力量和准确性
- 了解单打得分规则

**NTRP 3.0**
- 能连续对拉，正反手较稳定
- 发球开始有力量但缺乏变化
- 掌握双打基本站位

**NTRP 3.5**
- 掌握中等节奏击球
- 能控制方向和深度
- 有基本的前场技术（截击）

**NTRP 4.0**
- 能参加业余比赛并取得一定成绩
- 正反手能打出稳定的上旋球
- 有战术意识和策略

**NTRP 4.5**
- 开始掌握各种击球技术
- 能根据对手调整战术
- 发球有力量和变化

**NTRP 5.0+**
- 具备全面的技术和战术能力
- 可能是教练或前专业球员
- 能持续高水平发挥

#### 8.1.4 用户界面设计

**等级选择页面（引导式）：**

```
┌───────────────────────────────────────┐
│   🎾 选择你的网球水平                    │
├───────────────────────────────────────┤
│                                       │
│  ○ 新手                                │
│    刚开始学，还不太会打                  │
│    💡 对应 NTRP 1.0-2.0                │
│    示例：正在学习握拍和击球               │
│                                       │
│  ● 初级 ✓                              │
│    能连续对打，但不稳定                  │
│    💡 对应 NTRP 2.5-3.0                │
│    示例：能慢速对拉 5-10 个回合          │
│                                       │
│  ○ 中级                                │
│    能打比赛，有基本战术                  │
│    💡 对应 NTRP 3.5-4.0                │
│    示例：能参加业余比赛                  │
│                                       │
│  [ 展开更多选项 ]                       │
│                                       │
│  ────────────────────────────────────│
│  🎯 了解 NTRP？                         │
│  [切换到精确选择（NTRP 1.0-7.0）]       │
└───────────────────────────────────────┘
```

**NTRP 精确选择模式：**

```
┌───────────────────────────────────────┐
│   🎾 选择你的 NTRP 等级                 │
│   （美国网球等级标准，国际通用）          │
├───────────────────────────────────────┤
│                                       │
│   滑动选择你的等级：                     │
│                                       │
│   ├──●──────────────────────────┤    │
│   2.0   3.0   [3.5]   4.0   5.0      │
│                                       │
│   NTRP 3.5                            │
│   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│   掌握中等节奏击球，能控制方向和深度       │
│   有基本的前场技术（截击）               │
│                                       │
│   💡 对应简化等级：中级                 │
│                                       │
│   [ 查看完整 NTRP 标准 ]                │
│   [ 返回简化选择 ]                      │
└───────────────────────────────────────┘
```

**Slot 卡片显示（双等级展示）：**

```
┌─────────────────────────────────────┐
│ [头像] 小王                           │
│ 📊 中级 (NTRP 3.5) ✅已认证 | ⭐4.8   │
│                                     │
│ 🎾 网球 | 01-05 14:00-16:00         │
│ 📍 朝阳公园网球场 (1.2km)             │
│                                     │
│ 💪 等级要求：                         │
│    初级-中级 (NTRP 2.5-4.0)          │
│ 👥 性别：不限 | 还缺 1 人              │
│                                     │
│ 💬 "带水和毛巾"                       │
│                                     │
│ [ 申请加入 ]                         │
└─────────────────────────────────────┘
```

#### 8.1.5 等级认证体系

**认证类型和显示：**

| 认证类型 | 徽章 | 可信度 | 申请条件 |
|---------|-----|--------|---------|
| 自评 | 无 | ⭐ | 注册时自选 |
| 视频认证 | ✅蓝勾 | ⭐⭐⭐ | 上传击球视频，AI 评估 |
| 证书认证 | 🏆金牌 | ⭐⭐⭐⭐ | 上传正式等级证书 |
| 教练认证 | 👨‍🏫紫勾 | ⭐⭐⭐⭐⭐ | 教练推荐并验证 |

**认证流程（Phase 2）：**

```javascript
// 视频认证流程
1. 用户录制 30 秒击球视频
2. AI 初步评估（检测动作规范性）
3. 人工复核（每天处理 100 份）
4. 24 小时内反馈结果
5. 通过后显示 ✅ 徽章
```

#### 8.1.6 智能匹配算法

**匹配策略：**

```javascript
// 策略 1：精确匹配（优先）
if (用户有NTRP && Slot有NTRP范围) {
  return 用户NTRP在范围内 ? "完美匹配" : "不匹配"
}

// 策略 2：模糊匹配（兜底）
if (用户只有简化等级 || Slot只有简化等级) {
  return 简化等级重叠 ? "基本匹配" : "不匹配"
}

// 策略 3：弹性匹配（可选）
if (用户NTRP在范围±0.5内) {
  return "可能匹配（略有差距）"
}
```

**筛选器转换逻辑：**

```javascript
// 用户选择"中级"时，自动扩展查询
简化等级 "中级" → NTRP 3.5-4.0 → 也查询 3.0-4.5 范围的 Slot（弹性）

// 用户选择 NTRP 3.5 时
NTRP 3.5 → 主要匹配 3.0-4.0，弹性匹配 2.5-4.5
```

#### 8.1.7 等级校准机制（Phase 2）

**触发条件：**
- 完成 10 场球后
- 连续 5 场球评价都显示"等级不符"
- 用户主动申请重新评估

**校准流程：**

```
┌─────────────────────────────────────┐
│   🎯 等级校准建议                      │
├─────────────────────────────────────┤
│   你已完成 10 场球！                   │
│                                     │
│   根据你的表现和球友评价：              │
│   • 赢得了 7 场球                     │
│   • 平均评分 4.5 星                   │
│   • 3 位球友评价你"等级偏高"           │
│                                     │
│   建议调整等级：                       │
│   当前：中级 (NTRP 3.5)               │
│   建议：中级 (NTRP 3.0) 👈            │
│                                     │
│   [ 接受建议 ]  [ 保持不变 ]          │
└─────────────────────────────────────┘
```

#### 8.1.8 扩展支持（后续版本）

**UTR (Universal Tennis Rating)：**
- 更科学的动态评级系统
- 基于比赛结果自动计算
- 国际网球联合会认可

**其他运动等级标准：**
- 羽毛球：业余 1-9 级
- 乒乓球：初级/中级/高级/国家级
- 足球：业余/半职业/职业

### 8.2 支付分摊系统详细设计

#### 8.2.1 支付模式对比

| 模式 | 适用场景 | 资金流 | 开发复杂度 | 用户体验 |
|-----|---------|-------|-----------|---------|
| 免费局 | 公司场地、朋友打球 | 无 | ⭐ 简单 | ⭐⭐⭐⭐⭐ 最佳 |
| 引导转账（MVP） | 小额 AA | 用户 → Host | ⭐⭐ 中等 | ⭐⭐⭐ 一般 |
| 微信支付（Phase 2） | 所有收费场景 | 用户 → 平台 → Host | ⭐⭐⭐⭐ 复杂 | ⭐⭐⭐⭐⭐ 优秀 |

#### 8.2.2 Host 费用设置选项

**选项 1：免费局**
```
┌─────────────────────────────────────┐
│ ● 免费局（无需付费）                   │
│   适合：公司场地、朋友间打球            │
│   💡 不涉及任何费用                   │
└─────────────────────────────────────┘
```

**选项 2：完全 AA**
```
┌─────────────────────────────────────┐
│ ○ 需要 AA 付款                        │
│                                     │
│   场地总费用：¥ [200]                 │
│   参与人数：4 人（含我）               │
│   每人应付：¥50                       │
│                                     │
│   Host 承担：¥0（完全 AA）            │
└─────────────────────────────────────┘
```

**选项 3：部分承担**
```
┌─────────────────────────────────────┐
│ ○ 需要 AA 付款                        │
│                                     │
│   场地总费用：¥ [200]                 │
│   参与人数：4 人（含我）               │
│                                     │
│   Host 承担：¥ [50] 或 [1] 人份      │
│   💡 你可以承担部分费用作为福利         │
│                                     │
│   实际收款：¥150（3 人 × ¥50）        │
│   每人应付：¥50                       │
└─────────────────────────────────────┘
```

#### 8.2.3 支付流程设计

**MVP 流程（引导式转账）：**

```
┌─────────────────────────────────────┐
│ 1. Host 发布收费 Slot                │
│    ├─ 填写总费用：¥200               │
│    ├─ Host 承担：¥50                │
│    └─ 每人应付：¥50（3 人）          │
├─────────────────────────────────────┤
│ 2. 用户申请并通过                     │
│    └─ 显示付款引导                   │
├─────────────────────────────────────┤
│ 3. 付款方式选择                       │
│    ├─ 扫码向 Host 转账               │
│    └─ 或加入微信群收款               │
├─────────────────────────────────────┤
│ 4. 用户转账后截图                     │
│    └─ Host 手动确认收款              │
├─────────────────────────────────────┤
│ 5. 所有人确认收款                     │
│    └─ Slot 状态 → ready             │
└─────────────────────────────────────┘
```

**Phase 2 流程（微信支付）：**

```
┌─────────────────────────────────────┐
│ 1. 申请通过后                         │
│    └─ 自动创建支付订单               │
├─────────────────────────────────────┤
│ 2. 用户点击"立即支付"                 │
│    └─ 调起微信支付                   │
├─────────────────────────────────────┤
│ 3. 支付成功                          │
│    ├─ 资金到平台账户                 │
│    ├─ 更新支付状态                   │
│    └─ 发送支付成功通知               │
├─────────────────────────────────────┤
│ 4. 活动完成后                         │
│    ├─ 平台自动分账给 Host            │
│    └─ 扣除手续费（可选）             │
├─────────────────────────────────────┤
│ 5. 如果取消                          │
│    └─ 自动原路退款                   │
└─────────────────────────────────────┘
```

#### 8.2.4 数据库设计

**payment_settings 表（支付设置）：**

```javascript
{
  slotId: "slot_xxx",
  type: "aa_paid", // free/aa_paid/aa_prepay
  
  // 费用信息
  totalAmount: 200, // 场地总费用
  hostPaidAmount: 200, // Host 已支付（已订场）
  hostBearAmount: 50, // Host 承担金额
  participantCount: 3, // 需付款人数
  perPersonAmount: 50, // 每人应付
  
  // 支付方式
  paymentMethod: "wechat_transfer", // wechat_transfer/wechat_pay
  
  // 其他信息
  description: "包含场地费和3个球",
  refundPolicy: "2h_before", // 退款政策
  
  createdAt: Date,
  updatedAt: Date
}
```

**payment_records 表（支付记录）：**

```javascript
{
  _id: "pay_xxx",
  slotId: "slot_xxx",
  payerId: "openid_xxx",
  
  // 金额信息
  amount: 50,
  platformFee: 0.3, // 手续费
  hostReceive: 49.7, // Host 实收
  
  // 状态信息
  status: "paid", // pending/paid/refunded/failed
  paymentMethod: "wechat_pay",
  transactionId: "wx_4200001234567890",
  
  // 时间信息
  createdAt: Date,
  paidAt: Date,
  refundedAt: null,
  refundReason: null,
  
  // 确认信息（MVP 用）
  confirmedByHost: false,
  confirmNote: "已收到转账"
}
```

#### 8.2.5 取消和退款规则

**取消时机规则：**

| 距离开始时间 | Host 取消 | 参与者取消 | 退款比例 |
|------------|----------|-----------|---------|
| >24 小时 | ✅ 允许 | ✅ 允许 | 100% |
| 2-24 小时 | ✅ 允许（需承担手续费） | ✅ 允许 | 50% |
| <2 小时 | ❌ 不允许 | ❌ 不允许 | 0% |
| 特殊情况 | ✅ 允许（需说明原因） | ✅ 允许（需审核） | 酌情处理 |

**退款流程：**

```javascript
// 自动退款条件判断
function calculateRefund(slot, cancelTime) {
  const slotTime = new Date(slot.datetime);
  const hoursBefore = (slotTime - cancelTime) / 1000 / 60 / 60;
  
  if (hoursBefore >= 24) {
    return { refundRate: 1.0, reason: "提前 24 小时以上" };
  } else if (hoursBefore >= 2) {
    return { refundRate: 0.5, reason: "提前 2-24 小时" };
  } else {
    return { refundRate: 0, reason: "2 小时内不可退款" };
  }
}

// MVP：手动退款
async function manualRefund(paymentId) {
  // Host 在小程序内确认退款
  // 线下退款给用户
  await updatePaymentStatus(paymentId, 'refunded');
}

// Phase 2：自动退款
async function autoRefund(paymentId, refundRate) {
  const payment = await getPayment(paymentId);
  const refundAmount = payment.amount * refundRate;
  
  const result = await wx.cloud.cloudPay.refund({
    outTradeNo: paymentId,
    refundFee: refundAmount * 100 // 单位：分
  });
  
  if (result.resultCode === 'SUCCESS') {
    await updatePaymentStatus(paymentId, 'refunded');
    return { success: true, amount: refundAmount };
  }
}
```

#### 8.2.6 风险控制

**防止恶意行为：**

```javascript
// 1. 防止频繁取消
async function checkCancellationHistory(userId) {
  const recentCancellations = await db.collection('slots')
    .where({
      _openid: userId,
      status: 'cancelled',
      cancelledAt: _.gte(thirtyDaysAgo)
    })
    .count();
  
  if (recentCancellations > 3) {
    return { 
      allowed: false, 
      reason: "30 天内取消次数过多，暂时无法发布收费局" 
    };
  }
  
  return { allowed: true };
}

// 2. 防止虚假收款确认
async function verifyPaymentProof(paymentId, proofImage) {
  // MVP：要求上传转账截图
  // Phase 2：通过交易号自动验证
  
  // AI 识别截图真伪（可选）
  const isValid = await aiVerifyTransferProof(proofImage);
  
  return isValid;
}

// 3. 信用评分系统
function updateCreditScore(userId, action) {
  const scoreChange = {
    'complete_slot': +5,      // 完成活动
    'cancel_late': -10,       // 临时取消
    'no_show': -20,          // 爽约
    'dispute_resolved': +3    // 争议友好解决
  };
  
  return scoreChange[action] || 0;
}
```

#### 8.2.7 UI 展示示例

**Slot 卡片（收费）：**

```
┌─────────────────────────────────────┐
│ [头像] 小王 | 中级 (NTRP 3.5) ⭐4.8  │
│                                     │
│ 🎾 网球 | 01-05 14:00-16:00         │
│ 📍 朝阳公园网球场 (1.2km)             │
│                                     │
│ ┌─ 💰 费用说明 ───────────────┐     │
│ │ 场地总费用：¥200              │     │
│ │ 每人应付：¥50                 │     │
│ │ （4 人 AA，Host 已付款）       │     │
│ │                              │     │
│ │ 💡 包含场地费和 3 个球         │     │
│ │                              │     │
│ │ 付款进度：2/3 已付款           │     │
│ │ ✅ 小李、小张已付              │     │
│ │ ⏳ 还缺 1 人                  │     │
│ └──────────────────────────┘     │
│                                     │
│ 💪 等级：初级-中级 (NTRP 2.5-4.0)   │
│ 👥 性别：不限 | 还缺 1 人            │
│                                     │
│ [ 申请加入（需付款 ¥50）]            │
└─────────────────────────────────────┘
```

**付款界面：**

```
┌─────────────────────────────────────┐
│   🎉 申请已通过！                      │
├─────────────────────────────────────┤
│   小王邀请你参加：                     │
│   01-05 14:00 朝阳公园网球场          │
│                                     │
│ ┌─ 💰 需要支付场地费 ─────────┐      │
│ │ 应付金额：¥50                 │      │
│ │                              │      │
│ │ 费用说明：                    │      │
│ │ • 场地费（¥200 ÷ 4 人）       │      │
│ │ • 包含 3 个球                 │      │
│ └──────────────────────────┘      │
│                                     │
│ ─────────────────────────────────  │
│ 📱 支付方式（MVP）：                  │
│                                     │
│ [ 扫码向 Host 转账 ]                 │
│ └─ 保存二维码，打开微信扫码          │
│                                     │
│ [ 加入微信群收款 ]                   │
│ └─ 跳转到微信群收款              │
│                                     │
│ ─────────────────────────────────  │
│ ⚠️ 支付后请截图并上传凭证            │
│ ⚠️ Host 确认收款后才能获取详细地址   │
│ ⚠️ 取消需提前 2 小时，可退款 50%     │
│                                     │
│ [ 已转账，上传凭证 ]                 │
│ [ 稍后支付 ]                         │
└─────────────────────────────────────┘
```

**Host 收款管理：**

```
┌─────────────────────────────────────┐
│   💰 收款管理                         │
│   01-05 14:00 朝阳公园网球场          │
├─────────────────────────────────────┤
│   场地费用：¥200                      │
│   我已支付：¥200 ✅                   │
│   我承担：¥50（1 人份）               │
│   需要收款：¥150（3 人 × ¥50）        │
│                                     │
│   收款进度：2/3                       │
│   ━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│   已收：¥100 | 待收：¥50             │
│                                     │
│ ┌─ 参与者付款状态 ──────────────┐    │
│ │                                │    │
│ │ ✅ 小李 - 已付 ¥50              │    │
│ │    01-03 10:30 微信转账         │    │
│ │    [ 查看凭证 ] [ 标记已收 ]     │    │
│ │                                │    │
│ │ ✅ 小张 - 已付 ¥50              │    │
│ │    01-03 15:20 微信转账         │    │
│ │    [ 查看凭证 ] [ 标记已收 ]     │    │
│ │                                │    │
│ │ ⏳ 小赵 - 待付款                │    │
│ │    [ 发送付款提醒 ]             │    │
│ │    [ 标记已线下收款 ]           │    │
│ │                                │    │
│ └────────────────────────────┘    │
│                                     │
│ [ 查看收款记录 ]                     │
│ [ 活动完成，确认收款 ]               │
└─────────────────────────────────────┘
```

#### 8.2.8 Phase 2 升级计划

**微信支付接入步骤：**

1. **准备资质**（1-2 周）
   - 申请营业执照
   - 开通对公账户
   - 申请微信支付商户号

2. **技术开发**（1 周）
   - 接入微信支付 SDK
   - 实现支付回调
   - 开发分账功能

3. **测试验证**（3 天）
   - 沙箱环境测试
   - 小额真实交易测试
   - 退款流程测试

4. **灰度上线**（1 周）
   - 先开放给 10% 用户
   - 收集反馈和问题
   - 逐步扩大到 100%

**预期成本：**
- 微信支付手续费：0.6%
- 提现手续费：0.1%（累计）
- 总成本：约 0.7%

**盈利模式（可选）：**
- 不收平台费（补贴手续费）
- 或收取 1-2% 平台服务费

### 8.3 球场中心化系统详细设计

#### 8.3.1 设计理念

**核心问题：**
当前球场信息混乱，同一球场有多种写法，用户体验差：
- "朝阳公园网球场" vs "朝阳公园 1 号场" vs "Chaoyang Park Tennis"
- 地图上同一位置密密麻麻的 pin 点
- 不知道球场质量好不好

**解决方案：球场中心化**
把球场作为一等公民，Slots 关联到球场：

```
旧架构：Slot → 球场信息（文本）
新架构：Slot → 球场 ID → 球场详情
```

**用户体验优化：**

| 场景 | 旧方式 | 新方式 |
|-----|--------|--------|
| 浏览约球 | 地图上 50 个散乱 pin 点 | 地图上 10 个球场，每个显示 Slots 数 |
| 发布约球 | 手动输入球场名称（易错） | 搜索选择已有球场（标准化） |
| 选择球场 | 不知道球场好不好 | 看评分、照片、评价 |
| 了解球场 | 信息不全 | 完整的球场详情页 |

#### 8.3.2 球场数据标准化

**球场信息结构：**

```javascript
球场（Venue）
├── 基础信息
│   ├── 名称（主名称 + 别名）
│   ├── 地理位置（经纬度 + 详细地址）
│   └── 联系方式
├── 场地信息
│   ├── 场地数量
│   ├── 场地类型（硬地/红土/草地）
│   ├── 室内/室外
│   └── 是否有灯光
├── 设施信息
│   ├── 更衣室
│   ├── 淋浴
│   ├── 停车
│   └── 器材租赁
├── 价格信息
│   ├── 日场价格区间
│   └── 夜场价格区间
├── 社区内容
│   ├── 评价统计（评分 + 数量）
│   ├── 照片墙（用户上传）
│   └── 收藏数和浏览数
└── 约球时段
    └── 该球场的所有 Slots
```

#### 8.3.3 球场智能匹配算法

**目标：** 防止用户重复创建同一球场

**匹配策略：**

```javascript
// 步骤 1：地理位置匹配（优先级最高）
function matchByLocation(inputVenue) {
  // 查询半径 100 米内的球场
  const nearby = queryNearbyVenues(
    inputVenue.lat, 
    inputVenue.lng, 
    100 // 半径 100 米
  );
  
  // 如果距离 < 50 米，认为是同一球场
  const closest = nearby.find(v => 
    distance(v, inputVenue) < 50
  );
  
  if (closest) {
    return { matched: true, venue: closest };
  }
}

// 步骤 2：名称相似度匹配（辅助）
function matchByName(inputVenue) {
  // 查询同城球场
  const sameCityVenues = queryVenuesByCity(inputVenue.city);
  
  for (const venue of sameCityVenues) {
    // 计算编辑距离
    const similarity = calculateSimilarity(
      normalize(inputVenue.name),
      normalize(venue.name)
    );
    
    // 相似度 > 0.8，建议是同一球场
    if (similarity > 0.8) {
      return { 
        matched: true, 
        venue: venue,
        needsConfirmation: true // 需要用户确认
      };
    }
  }
}

// 综合匹配
function findMatchingVenue(inputVenue) {
  // 1. 先地理位置
  let result = matchByLocation(inputVenue);
  if (result.matched) return result;
  
  // 2. 再名称
  result = matchByName(inputVenue);
  if (result.matched) return result;
  
  // 3. 没找到，创建新球场
  return { matched: false };
}
```

**匹配示例：**

| 输入 | 已有球场 | 匹配结果 |
|------|---------|---------|
| "朝阳公园网球场" (116.4, 39.9) | "朝阳公园网球场" (116.40001, 39.90001) | ✅ 自动匹配（距离 11m） |
| "朝阳公园网球" | "朝阳公园网球场" | ✅ 建议匹配（相似度 0.92） |
| "Chaoyang Park Tennis" | "朝阳公园网球场" | ❓ 需人工审核（翻译问题） |

#### 8.3.4 用户界面流程

**流程 1：发布 Slot 时选择球场**

```
┌────────────────────────────────────┐
│ Step 1: 搜索球场                    │
│ [🔍 搜索球场名称或地址...]          │
│                                    │
│ 附近的球场：                        │
│ ○ 朝阳公园网球场 ⭐4.5 (1.2km)     │
│ ○ 奥森公园网球中心 ⭐4.7 (2.5km)   │
│ ○ 国家网球中心 ⭐4.9 (3.8km)       │
│                                    │
│ [🆕 找不到？创建新球场]             │
└────────────────────────────────────┘
         ↓ 用户选择球场
┌────────────────────────────────────┐
│ Step 2: 确认球场信息                │
│ 🏟️ 朝阳公园网球场                  │
│ 📍 北京市朝阳区农展南路1号          │
│ ⭐ 4.5 (230条评价) | 8片场地       │
│                                    │
│ 💡 这是您要的球场吗？               │
│ [✅ 确认] [❌ 不是，重新选择]        │
└────────────────────────────────────┘
         ↓ 确认
┌────────────────────────────────────┐
│ Step 3: 继续填写 Slot 信息          │
│ （时间、费用、要求等）              │
└────────────────────────────────────┘
```

**流程 2：创建新球场**

```
┌────────────────────────────────────┐
│ 🆕 添加新球场                       │
│                                    │
│ 1️⃣ 在地图上定位                    │
│    [拖动地图选择准确位置]           │
│                                    │
│ 2️⃣ 填写基本信息                    │
│    球场名称: [朝阳公园网球场]       │
│    详细地址: [北京市朝阳区...]      │
│                                    │
│ 3️⃣ 场地信息                        │
│    场地数: [8] 片                  │
│    类型: ☑硬地 ☐红土 ☐草地        │
│    室内/外: ○室内 ●室外            │
│    灯光: ☑有 ☐无                  │
│                                    │
│ 4️⃣ 价格参考（选填）                │
│    日场: [100-150] 元/小时         │
│                                    │
│ 5️⃣ 上传照片（选填）                │
│    [+] [+] [+]                     │
│                                    │
│ ────────────────────────────────  │
│ 💡 球场需审核，通过后获得+10信用分   │
│ [提交] [取消]                       │
└────────────────────────────────────┘
```

**流程 3：浏览球场和 Slots**

```
┌────────────────────────────────────┐
│ 地图视图（按球场聚合）              │
│                                    │
│    [地图显示球场标记]               │
│    🏟️(5) 🏟️(3) 🏟️(8)             │
│    数字 = Slots 数量               │
│                                    │
│ 点击球场 ↓                         │
└────────────────────────────────────┘
         ↓
┌────────────────────────────────────┐
│ 球场卡片（底部弹出）                │
│                                    │
│ 🏟️ 朝阳公园网球场                  │
│ ⭐ 4.5 (230评价) | 📍 1.2km       │
│                                    │
│ 📸 [照片] [照片] [+3]               │
│                                    │
│ 💪 今日约球 (5场)                   │
│ • 14:00-16:00 中级 还缺1人 ¥50    │
│ • 16:00-18:00 高级 还缺2人 免费    │
│                                    │
│ [查看所有时段] [查看球场详情]       │
│ [在这里发布约球]                    │
└────────────────────────────────────┘
```

#### 8.3.5 球场评价系统

**评价权限：**
- 只有在该球场打过球的用户可评价
- 每人每球场只能评价一次（可修改）

**评价内容：**

```
整体评分: ⭐⭐⭐⭐⭐ (1-5星)

分项评分（选填）:
├── 场地质量: ⭐⭐⭐⭐⭐
├── 设施完善: ⭐⭐⭐⭐⭐
├── 环境卫生: ⭐⭐⭐⭐⭐
└── 性价比: ⭐⭐⭐⭐⭐

标签（可多选）:
☑场地好 ☑有灯光 ☐价格贵
☑交通方便 ☐人太多 ☐设施陈旧

文字评价（选填）:
"场地维护得很好，硬地很平整..."

照片（最多9张）:
[+] [+] [+]
```

**评分计算：**

```javascript
// 加权评分（最近的评价权重更高）
function calculateRating(reviews) {
  const now = Date.now();
  let weightedSum = 0;
  let totalWeight = 0;
  
  reviews.forEach(review => {
    // 最近30天的评价权重 = 1.0
    // 30-90天的评价权重 = 0.8
    // 90天以上的评价权重 = 0.6
    const age = (now - review.createdAt) / (1000 * 60 * 60 * 24);
    const weight = age < 30 ? 1.0 : age < 90 ? 0.8 : 0.6;
    
    weightedSum += review.rating.overall * weight;
    totalWeight += weight;
  });
  
  return (weightedSum / totalWeight).toFixed(1);
}
```

**评价展示：**

```
┌────────────────────────────────────┐
│ 💬 用户评价 (230条)                 │
├────────────────────────────────────┤
│                                    │
│ ⭐⭐⭐⭐⭐ 小王 · 2天前             │
│ 🏷️ 场地好 · 有灯光 · 交通方便      │
│ "场地维护得很好，硬地很平整。       │
│  夜场灯光不错。"                    │
│ 📸 [照片] [照片]                    │
│ 👍 有用 (12)  👎 (0)                │
│                                    │
│ ────────────────────────────────  │
│                                    │
│ ⭐⭐⭐⭐ 小李 · 5天前               │
│ 🏷️ 场地好 · 人太多                 │
│ "周末人太多，建议工作日来。"        │
│ 👍 有用 (8)  👎 (1)                 │
│                                    │
│ [查看全部评价]                      │
└────────────────────────────────────┘
```

#### 8.3.6 数据迁移和兼容

**问题：** 旧版本中 Slots 直接包含球场信息（文本），新版本需要关联球场 ID

**解决方案：** 渐进式迁移

```javascript
// 方案 1：后台批量迁移
async function migrateOldSlots() {
  const oldSlots = await db.collection('slots')
    .where({ venueId: _.exists(false) })
    .get();
  
  for (const slot of oldSlots.data) {
    // 尝试匹配球场
    const venue = await findMatchingVenue({
      name: slot.venue.name,
      lat: slot.venue.lat,
      lng: slot.venue.lng
    });
    
    let venueId;
    
    if (venue.matched) {
      venueId = venue.venue._id;
    } else {
      // 自动创建球场
      const newVenue = await db.collection('venues').add({
        name: slot.venue.name,
        location: db.Geo.Point(slot.venue.lng, slot.venue.lat),
        address: { detail: slot.venue.address },
        status: 'verified',
        createdBy: 'system',
        createdAt: db.serverDate()
      });
      venueId = newVenue._id;
    }
    
    // 更新 Slot
    await db.collection('slots').doc(slot._id).update({
      venueId: venueId
    });
  }
}

// 方案 2：兼容读取（过渡期）
async function getSlotWithVenue(slotId) {
  const slot = await db.collection('slots').doc(slotId).get();
  
  if (slot.data.venueId) {
    // 新版本：通过 ID 获取球场详情
    const venue = await db.collection('venues')
      .doc(slot.data.venueId)
      .get();
    
    return {
      ...slot.data,
      venueDetail: venue.data
    };
  } else {
    // 旧版本：直接使用嵌入的球场信息
    return {
      ...slot.data,
      venueDetail: slot.data.venue
    };
  }
}
```

#### 8.3.7 球场数据质量控制

**1. 审核机制**

```
用户创建球场 → 进入审核队列
    ↓
管理员审核:
├── 通过 → 球场上线 + 用户获得信用分
├── 拒绝 → 通知用户修改
└── 合并 → 合并到已有球场
```

**2. 去重检测**

```javascript
// 定期扫描重复球场
async function detectDuplicates() {
  const venues = await db.collection('venues').get();
  const duplicates = [];
  
  for (let i = 0; i < venues.data.length; i++) {
    for (let j = i + 1; j < venues.data.length; j++) {
      const v1 = venues.data[i];
      const v2 = venues.data[j];
      
      // 距离 < 50m 且名称相似
      if (distance(v1, v2) < 50 && 
          nameSimilarity(v1.name, v2.name) > 0.8) {
        duplicates.push([v1._id, v2._id]);
      }
    }
  }
  
  // 发送给管理员审核
  return duplicates;
}

// 合并球场
async function mergeVenues(keepId, removeId) {
  // 1. 更新所有关联的 Slots
  await db.collection('slots')
    .where({ venueId: removeId })
    .update({ venueId: keepId });
  
  // 2. 合并评价
  await db.collection('venue_reviews')
    .where({ venueId: removeId })
    .update({ venueId: keepId });
  
  // 3. 重新计算评分
  await updateVenueRating(keepId);
  
  // 4. 删除重复球场
  await db.collection('venues').doc(removeId).remove();
}
```

**3. 用户举报**

```
用户发现错误信息 → 点击"举报"
    ↓
选择问题类型:
├── 位置不对
├── 信息错误
├── 重复球场
└── 已关闭
    ↓
管理员处理 → 修正数据
```

#### 8.3.8 实施计划

**Week 1-2: 球场基础设施**
- [ ] 球场数据库设计和创建
- [ ] 球场匹配算法实现
- [ ] 发布 Slot 时选择球场功能
- [ ] 旧数据迁移脚本

**Week 3: 地图优化**
- [ ] 地图按球场聚合显示
- [ ] 球场卡片弹窗
- [ ] 球场详情页基础版

**Week 4: 球场社区**
- [ ] 球场评价系统
- [ ] 球场照片上传
- [ ] 球场收藏功能

**Week 5: 数据质量**
- [ ] 球场审核后台
- [ ] 重复检测和合并
- [ ] 用户举报处理

**后续优化：**
- 球场推荐算法
- 球场热度排行
- 球场活动和赛事
- 球场预订集成

### 8.4 参考竞品
- 小鹿陪练（1v1 约教练）
- 悦动圈（跑步社交）
- Keep（线下运动活动）
- PlayYourCourt（国外网球约球平台，参考其 NTRP 系统）
- 小鹅拼拼（AA 付款参考）
- 大众点评（球场评价参考）
- Airbnb（场地信息展示参考）

### 8.5 下一步行动
1. ✅ 产品设计文档确认
2. 📋 UI 设计稿（Figma）
3. 💻 开发环境搭建
4. 🚀 开始 Sprint 1

---

**文档版本：** v1.0  
**最后更新：** 2026-01-01  
**负责人：** [待填写]